---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Contacto - TAANAB Arquitectos" description="Ponte en contacto con nuestro equipo de arquitectos. Estamos en Guadalajara y Playa del Carmen.">
  <Navigation />
  
  <main class="pt-16 sm:pt-18 md:pt-20 lg:pt-20 xl:pt-20 min-h-screen bg-white">
    <div class="max-w-sm sm:max-w-md md:max-w-4xl lg:max-w-6xl xl:max-w-7xl mx-auto px-4 sm:px-6 md:px-8 lg:px-8 xl:px-8">
      <div class="flex flex-col lg:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-8 xl:gap-8 min-h-screen">
        
        <!-- Redes Sociales  -->
        <div class="flex sm:flex lg:flex-col justify-center lg:justify-center items-center space-x-4 sm:space-x-4 md:space-x-4 lg:space-x-0 xl:space-x-0 lg:space-y-6 xl:space-y-8 w-full sm:w-full md:w-full lg:w-16 xl:w-20 pt-4 sm:pt-6 md:pt-8 lg:pt-16 xl:pt-20">
          <a href="https://facebook.com/taanab" class="text-gray-600 hover:text-amber-600 transition-colors duration-300">
            <svg class="w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 xl:w-8 xl:h-8" fill="currentColor" viewBox="0 0 24 24">
              <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
            </svg>
          </a>
          <a href="https://instagram.com/taanab" class="text-gray-600 hover:text-amber-600 transition-colors duration-300">
            <svg class="w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 xl:w-8 xl:h-8" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.40s-.644-1.40-1.439-1.40z"/>
            </svg>
          </a>
          <a href="https://wa.me/523331234567" class="text-gray-600 hover:text-amber-600 transition-colors duration-300">
            <svg class="w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8 lg:w-8 lg:h-8 xl:w-8 xl:h-8" fill="currentColor" viewBox="0 0 24 24">
              <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
            </svg>
          </a>
        </div>
        
        <!-- Contenido principal con formulario e imagen -->
        <div class="flex-1 flex flex-col lg:flex-row gap-4 sm:gap-6 md:gap-8 lg:gap-8 xl:gap-8 pt-4 sm:pt-6 md:pt-8 lg:pt-16 xl:pt-20">
        
        <!-- Formulario de Contacto -->
        <div class="bg-white p-4 sm:p-5 md:p-6 lg:p-7 xl:p-8 w-full sm:w-full md:w-full lg:w-[400px] xl:w-[465px] flex-shrink-0">
          <h1 class="text-2xl sm:text-2xl md:text-3xl lg:text-3xl xl:text-4xl font-light text-gray-800 mb-6 sm:mb-7 md:mb-8 lg:mb-9 xl:mb-10 tracking-wider">Contacto</h1>
          
          <form id="contact-form" class="space-y-4 sm:space-y-5 md:space-y-6 lg:space-y-6 xl:space-y-6">
            <div>
              <input 
                type="text" 
                name="user_name" 
                id="user_name"
                placeholder="Nombre"
                required
                class="w-full border-0 border-b-2 border-gray-300 bg-transparent pb-2 sm:pb-2 md:pb-3 lg:pb-3 xl:pb-3 text-gray-800 placeholder-gray-500 focus:border-amber-600 focus:outline-none text-base sm:text-base md:text-lg lg:text-lg xl:text-lg transition-colors duration-300">
            </div>
            
            <div>
              <input 
                type="email" 
                name="user_email" 
                id="user_email"
                placeholder="E-mail"
                required
                class="w-full border-0 border-b-2 border-gray-300 bg-transparent pb-2 sm:pb-2 md:pb-3 lg:pb-3 xl:pb-3 text-gray-800 placeholder-gray-500 focus:border-amber-600 focus:outline-none text-base sm:text-base md:text-lg lg:text-lg xl:text-lg transition-colors duration-300"
              >
            </div>
            
            <div>
              <input 
                type="tel" 
                name="user_phone" 
                id="user_phone"
                placeholder="Teléfono"
                class="w-full border-0 border-b-2 border-gray-300 bg-transparent pb-2 sm:pb-2 md:pb-3 lg:pb-3 xl:pb-3 text-gray-800 placeholder-gray-500 focus:border-amber-600 focus:outline-none text-base sm:text-base md:text-lg lg:text-lg xl:text-lg transition-colors duration-300"
              >
            </div>
            
            <div>
              <label for="message" class="block mb-2 text-gray-700 font-medium text-base sm:text-base md:text-lg lg:text-lg xl:text-lg">Mensaje</label>
              <textarea 
                name="message" 
                id="message"
                
                rows="4"
                required
                class="w-full border border-gray-300 bg-transparent p-3 text-gray-800 placeholder-gray-500 focus:border-amber-600 focus:outline-none text-base sm:text-base md:text-lg lg:text-lg xl:text-lg transition-colors duration-300 resize-none"
              ></textarea>
            </div>
            
            <div class="flex justify-center">
              <button 
                type="submit"
                id="submit-btn"
                class="bg-custom-hover text-stone-700 w-44 sm:w-52 md:w-60 lg:w-64 xl:w-72 px-6 sm:px-7 md:px-8 lg:px-9 xl:px-10 py-2 sm:py-2 md:py-3 lg:py-3 xl:py-3 text-base sm:text-base md:text-lg lg:text-lg xl:text-lg font-medium tracking-wider uppercase hover:bg-black hover:text-white transition-colors duration-300 mt-4 sm:mt-5 md:mt-6 lg:mt-6 xl:mt-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <span id="btn-text">Enviar</span>
                <span id="btn-loading" class="hidden">Enviando...</span>
              </button>
            </div>
            
            <!-- Mensajes de estado -->
            <div id="form-messages" class="text-center mt-3 sm:mt-3 md:mt-4 lg:mt-4 xl:mt-4 hidden">
              <div id="success-message" class="text-green-600 hidden text-sm sm:text-sm md:text-base lg:text-base xl:text-base">
                ✅ ¡Mensaje enviado correctamente! Te responderemos pronto.
              </div>
              <div id="error-message" class="text-red-600 hidden text-sm sm:text-sm md:text-base lg:text-base xl:text-base">
                ❌ Error al enviar el mensaje. Por favor, intenta nuevamente.
              </div>
            </div>
          </form>
          
          <!-- Espaciado adicional después del formulario -->
          <div class="pb-4 sm:pb-5 md:pb-6 lg:pb-7 xl:pb-8"></div>
        </div>
        
        <!-- Tarjeta del Arquitecto -->
  <div class="flex flex-col w-full sm:w-full md:w-full lg:w-80 xl:w-96 flex-shrink-0 ml-auto">
          <!-- Imagen superior sin efectos -->
          <div class="relative h-40 sm:h-44 md:h-48 lg:h-52 xl:h-56 overflow-hidden bg-gray-100">
            <!-- Imagen de fondo -->
            <img 
              src="https://taanab.mx/images/contact/contacto-1.webp" 
              alt="Arquitecto Jorge Iván Barboza"
              class="w-full h-full object-contain"
            >
          </div>
          
          <!-- Recuadro de blanco o contenedor  -->
          <div class="relative bg-white p-4 sm:p-5 md:p-6 lg:p-7 xl:p-8 text-center shadow-lg flex-1 flex flex-col justify-center">
            <!-- Patrón de puntos  en el recuadro -->
            <div class="absolute inset-0 opacity-20">
              <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(0, 0, 0, 0.4) 1px, transparent 0); background-size: 6px 6px;"></div>
            </div>
            
            <!-- Contenido del recuadro -->
            <div class="relative z-10">
              <h2 class="text-lg sm:text-lg md:text-xl lg:text-xl xl:text-2xl font-light mb-1 sm:mb-1 md:mb-2 lg:mb-2 xl:mb-2 text-gray-800">Arq. Jorge Iván</h2>
              <h3 class="text-lg sm:text-lg md:text-xl lg:text-xl xl:text-2xl font-light mb-3 sm:mb-3 md:mb-4 lg:mb-4 xl:mb-4 text-gray-800">Barboza</h3>
              
              <div class="space-y-2 sm:space-y-2 md:space-y-3 lg:space-y-3 xl:space-y-3 text-sm sm:text-sm md:text-base lg:text-base xl:text-base text-gray-700">
                <div>
                  <p class="font-medium">Guadalajara, Jal</p>
                </div>
                <div>
                  <p class="font-medium">Playa del Carmen,</p>
                  <p class="font-medium">QROO</p>
                </div>
                <div class="pt-2 sm:pt-2 md:pt-3 lg:pt-3 xl:pt-3">
                  <a 
                    href="mailto:contacto@taanab.mx" 
                    class="text-black hover:text-black transition-colors duration-300 font-medium"
                  >
                    contacto@taanab.mx
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </main>
  
  <Footer />
</Layout>

<script>
  // Configuración de EmailJS
  document.addEventListener('DOMContentLoaded', function() {
    //Mi  Public Key  
   
    (window as any).emailjs.init('QySFv97htZS_3-vsp');
    
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
    const btnText = document.getElementById('btn-text') as HTMLElement;
    const btnLoading = document.getElementById('btn-loading') as HTMLElement;
    const formMessages = document.getElementById('form-messages') as HTMLElement;
    const successMessage = document.getElementById('success-message') as HTMLElement;
    const errorMessage = document.getElementById('error-message') as HTMLElement;
    
    if (!form || !submitBtn || !btnText || !btnLoading || !formMessages || !successMessage || !errorMessage) {
      console.error('Elementos del formulario no encontrados');
      return;
    }
    
    form.addEventListener('submit', function(e: Event) {
      e.preventDefault();
      
      // Mostrar estado de carga
      submitBtn.disabled = true;
      btnText.classList.add('hidden');
      btnLoading.classList.remove('hidden');
      
      // Ocultar mensajes previos
      formMessages.classList.add('hidden');
      successMessage.classList.add('hidden');
      errorMessage.classList.add('hidden');
      
      // Obtener valores de forma segura
      const userNameEl = document.getElementById('user_name') as HTMLInputElement;
      const userEmailEl = document.getElementById('user_email') as HTMLInputElement;
      const userPhoneEl = document.getElementById('user_phone') as HTMLInputElement;
      const messageEl = document.getElementById('message') as HTMLTextAreaElement;
      
      if (!userNameEl || !userEmailEl || !messageEl) {
        console.error('Campos del formulario no encontrados');
        return;
      }
      
      // Parámetros del email
      const templateParams = {
        user_name: userNameEl.value,
        user_email: userEmailEl.value,
        user_phone: userPhoneEl?.value || '',
        message: messageEl.value,
        to_email: 'eliezer2vazquez@gmail.com', // Email principal
        reply_to: userEmailEl.value
      };
      
      // Enviar al email principal
      (window as any).emailjs.send('service_ru5s9hl', 'template_5dm8os8', templateParams)
        .then(function(response: any) {
          console.log('Email principal enviado:', response);
          
          //  copia a otro email 
          const copyParams = {
            ...templateParams,
            to_email: 'contacto@taanab.mx' //   email que  recibira copia
          };
          
          return (window as any).emailjs.send('service_ru5s9hl', 'template_5dm8os8', copyParams);
        })
        .then(function(response: any) {
          console.log('Copia enviada:', response);
          
          // Enviar email de confirmación al cliente
          const confirmationParams = {
            user_name: templateParams.user_name,
            user_email: templateParams.user_email,
            to_email: templateParams.user_email
          };
          
          return (window as any).emailjs.send('service_ru5s9hl', 'template_z8ej13f', confirmationParams); // email de confirmación al cliente
        })
        .then(function(response: any) {
          console.log('Email de confirmación enviado:', response);
          
          // Mostrar mensaje de éxito
          successMessage.classList.remove('hidden');
          formMessages.classList.remove('hidden');
          
          // Limpiar formulario
          form.reset();
        })
        .catch(function(error: any) {
          console.error('Error:', error);
          
          // Mostrar mensaje de error
          errorMessage.classList.remove('hidden');
          formMessages.classList.remove('hidden');
        })
        .finally(function() {
          // Restaurar botón
          submitBtn.disabled = false;
          btnText.classList.remove('hidden');
          btnLoading.classList.add('hidden');
        });
    });
  });
</script>

